@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════════════════
   THERAPEUTISCHES DESIGN SYSTEM
   Wissenschaftlich fundiertes Farbsystem für mentale Gesundheit
   ═══════════════════════════════════════════════════════════════════════════ */

/* System Font Stack - Optimiert für Lesbarkeit */
body {
  font-family:
    -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  @apply bg-gray-50 text-gray-900 antialiased;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ═══════════════════════════════════════════════════════════════════════════
   DARK MODE BASE STYLES
   Soft Charcoal statt hartes Schwarz - schont das visuelle System
   ═══════════════════════════════════════════════════════════════════════════ */

.dark body,
.dark {
  @apply bg-dark-bg text-darkText-primary;
}

/* ═══════════════════════════════════════════════════════════════════════════
   GRADIENTS - Therapeutisch beruhigend
   ═══════════════════════════════════════════════════════════════════════════ */

/* Light Mode Gradients */
.gradient-calm {
  background: linear-gradient(135deg, #667eea 0%, #8b5cf6 100%);
}

.gradient-success {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
}

.gradient-subtle {
  background: linear-gradient(180deg, #f9fafb 0%, #e0e7ff 100%);
}

.gradient-lavender {
  background: linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%);
}

/* Dark Mode Gradients - Subtiler, weniger stimulierend */
.dark .gradient-calm {
  background: linear-gradient(135deg, #4c51bf 0%, #6b46c1 100%);
}

.dark .gradient-success {
  background: linear-gradient(135deg, #15803d 0%, #166534 100%);
}

.dark .gradient-subtle {
  background: linear-gradient(180deg, #0f1419 0%, #1a1f26 100%);
}

.dark .gradient-lavender {
  background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
}

/* ═══════════════════════════════════════════════════════════════════════════
   KOMPONENTEN STYLES
   ═══════════════════════════════════════════════════════════════════════════ */

/* Cards */
.card {
  @apply bg-white rounded-xl shadow-soft;
}

.dark .card {
  @apply bg-dark-surface shadow-dark-soft border border-dark-border;
}

/* Inputs */
.input {
  @apply bg-white border border-gray-300 text-gray-900 rounded-lg;
  @apply focus:ring-2 focus:ring-calm-500 focus:border-calm-500;
}

.dark .input {
  @apply bg-dark-elevated border-dark-border text-darkText-primary;
  @apply focus:ring-calm-400 focus:border-calm-400;
}

/* Buttons */
.btn-primary {
  @apply bg-calm-500 text-white hover:bg-calm-600 active:bg-calm-700;
  @apply transition-colors duration-200;
}

.dark .btn-primary {
  @apply bg-calm-600 hover:bg-calm-500 active:bg-calm-700;
}

.btn-secondary {
  @apply bg-gray-100 text-gray-700 hover:bg-gray-200;
}

.dark .btn-secondary {
  @apply bg-dark-elevated text-darkText-primary hover:bg-dark-hover;
}

/* ═══════════════════════════════════════════════════════════════════════════
   MODUL-SPEZIFISCHE FARBEN
   Konsistente Farbcodes reduzieren kognitive Last
   ═══════════════════════════════════════════════════════════════════════════ */

/* Home/Dashboard - Blau (Ruhe, Vertrauen) */
.module-home {
  @apply text-calm-500;
}
.dark .module-home {
  @apply text-calm-400;
}

/* Vier-Ohren - Violett (Reflexion, Tiefe) */
.module-analyzer {
  @apply text-lavender-500;
}
.dark .module-analyzer {
  @apply text-lavender-400;
}

/* Skills - Grün (Wachstum, Erfolg) */
.module-skills {
  @apply text-success-500;
}
.dark .module-skills {
  @apply text-success-400;
}

/* Diary - Orange (Wärme, Emotionen) */
.module-diary {
  @apply text-warning-500;
}
.dark .module-diary {
  @apply text-warning-400;
}

/* ═══════════════════════════════════════════════════════════════════════════
   TRANSITIONS & ANIMATIONS
   ═══════════════════════════════════════════════════════════════════════════ */

.transition-smooth {
  @apply transition-all duration-200 ease-out;
}

.transition-theme {
  transition:
    background-color 300ms ease,
    color 300ms ease,
    border-color 300ms ease,
    box-shadow 300ms ease;
}

/* ═══════════════════════════════════════════════════════════════════════════
   ACCESSIBILITY
   ═══════════════════════════════════════════════════════════════════════════ */

/* Focus Styles */
:focus-visible {
  outline: 2px solid #667eea;
  outline-offset: 2px;
  border-radius: 4px;
}

.dark :focus-visible {
  outline-color: #818cf8;
}

/* Screen Reader Only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Reduced Motion - Respektiere Nutzer-Präferenzen */
@media (prefers-reduced-motion: reduce) {
  *,
  ::before,
  ::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   SCROLLBAR - Subtil und unaufdringlich
   ═══════════════════════════════════════════════════════════════════════════ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100 rounded-full;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400;
}

/* Dark Mode Scrollbar */
.dark ::-webkit-scrollbar-track {
  @apply bg-dark-surface;
}

.dark ::-webkit-scrollbar-thumb {
  @apply bg-dark-border;
}

.dark ::-webkit-scrollbar-thumb:hover {
  @apply bg-dark-hover;
}

/* ═══════════════════════════════════════════════════════════════════════════
   SELECTION - Therapeutische Akzentfarbe
   ═══════════════════════════════════════════════════════════════════════════ */

::selection {
  @apply bg-calm-200 text-calm-900;
}

.dark ::selection {
  @apply bg-calm-800 text-calm-100;
}

/* ═══════════════════════════════════════════════════════════════════════════
   UTILITIES
   ═══════════════════════════════════════════════════════════════════════════ */

/* Glass Effect */
.glass {
  @apply bg-white/80 backdrop-blur-sm;
}

.dark .glass {
  @apply bg-dark-surface/80;
}

/* Glow Effects für wichtige Elemente */
.glow-calm {
  box-shadow: 0 0 15px rgba(102, 126, 234, 0.4);
}

.dark .glow-calm {
  box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
}

/* Text Shadow für bessere Lesbarkeit auf Bildern */
.text-shadow {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.dark .text-shadow {
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* ═══════════════════════════════════════════════════════════════════════════
   CLYDE DESIGN SYSTEM
   Der sichere Begleiter - Visuelles System für Notfall & Führung
   ═══════════════════════════════════════════════════════════════════════════ */

/* ─────────────────────────────────────────────────────────────────────────────
   EMERGENCY OVERLAY - Volle Aufmerksamkeit, minimale kognitive Last
   ───────────────────────────────────────────────────────────────────────────── */

.emergency-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: #ef4444;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  text-align: center;
  color: white;
  animation: emergency-pulse 2s ease-in-out infinite;
}

@keyframes emergency-pulse {
  0%, 100% { background: #ef4444; }
  50% { background: #dc2626; }
}

@media (prefers-reduced-motion: reduce) {
  .emergency-overlay {
    animation: none;
    background: #ef4444;
  }
}

.emergency-content {
  max-width: 500px;
  width: 100%;
}

.emergency-title {
  font-size: 4rem;
  font-weight: 900;
  margin-bottom: 1rem;
  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.emergency-message {
  font-size: 1.25rem;
  opacity: 0.95;
  margin-bottom: 2rem;
  line-height: 1.5;
}

.emergency-skill {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: rgba(255, 255, 255, 0.15);
  border: 2px solid white;
  border-radius: 12px;
  padding: 1.25rem;
  margin-bottom: 1rem;
}

.emergency-skill-icon {
  font-size: 2.5rem;
}

.emergency-skill-text {
  text-align: left;
}

.emergency-skill-name {
  display: block;
  font-size: 1.25rem;
  font-weight: 700;
}

.emergency-skill-hint {
  display: block;
  font-size: 0.875rem;
  opacity: 0.9;
  margin-top: 0.25rem;
}

.emergency-alternative {
  font-size: 0.875rem;
  opacity: 0.8;
  margin-bottom: 2rem;
}

.emergency-alt-options {
  display: block;
  margin-top: 0.25rem;
}

.emergency-exit-btn {
  background: white;
  color: #ef4444;
  border: none;
  padding: 1rem 2.5rem;
  border-radius: 50px;
  font-size: 1.25rem;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  transition: transform 0.2s, box-shadow 0.2s;
}

.emergency-exit-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
}

.emergency-exit-btn:focus {
  outline: 3px solid rgba(255, 255, 255, 0.5);
  outline-offset: 3px;
}

.emergency-nordstern {
  margin-top: 2rem;
  font-size: 1rem;
  font-style: italic;
  opacity: 0.9;
}

.emergency-escape-hint {
  position: absolute;
  bottom: 20px;
  font-size: 0.75rem;
  opacity: 0.6;
}

.emergency-escape-hint kbd {
  background: rgba(255, 255, 255, 0.2);
  padding: 2px 8px;
  border-radius: 4px;
  margin-right: 4px;
}

/* ─────────────────────────────────────────────────────────────────────────────
   CLYDE EXPLAINS - Schüler-Erklärungen
   ───────────────────────────────────────────────────────────────────────────── */

.clyde-explains {
  @apply bg-calm-50 dark:bg-dark-elevated border-l-4 border-calm-500 rounded-lg p-4 my-4;
}

.clyde-explains-header {
  @apply flex items-center gap-3 mb-3;
}

.clyde-avatar {
  @apply w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm;
  background: linear-gradient(135deg, #667eea, #7c3aed);
  color: white;
}

.clyde-title {
  @apply font-bold text-gray-900 dark:text-white;
}

.clyde-simple {
  @apply text-gray-700 dark:text-gray-300 mb-3;
}

.clyde-science-toggle {
  @apply text-sm text-calm-600 dark:text-calm-400 hover:text-calm-700 dark:hover:text-calm-300;
  @apply bg-transparent border-none cursor-pointer p-0 mb-2;
}

.clyde-science {
  @apply text-sm text-gray-600 dark:text-gray-400 italic pl-4 border-l-2 border-calm-300 dark:border-calm-600 mb-3;
}

.clyde-steps {
  @apply list-decimal list-inside space-y-1 text-gray-700 dark:text-gray-300;
}

.clyde-steps li {
  @apply py-1;
}

/* ─────────────────────────────────────────────────────────────────────────────
   TOOLTIP SYSTEM
   ───────────────────────────────────────────────────────────────────────────── */

.tooltip-wrapper {
  @apply inline-flex items-center;
}

.tooltip-trigger {
  @apply inline-flex items-center gap-1 cursor-help;
}

.tooltip-icon {
  @apply text-calm-500 dark:text-calm-400 text-sm opacity-70;
}

.tooltip-content {
  @apply bg-gray-900 dark:bg-gray-800 text-white rounded-lg p-3 shadow-xl;
  max-width: 280px;
  z-index: 1000;
  animation: tooltip-fade-in 0.15s ease-out;
}

@keyframes tooltip-fade-in {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

.tooltip-title {
  @apply font-bold text-sm mb-1;
}

.tooltip-text {
  @apply text-sm text-gray-300 mb-2;
}

.tooltip-example {
  @apply text-xs bg-gray-800 dark:bg-gray-700 rounded p-2 mt-2;
}

.tooltip-example-label {
  @apply text-calm-400 font-semibold block mb-1;
}

.tooltip-example-text {
  @apply text-gray-300 italic;
}

/* ─────────────────────────────────────────────────────────────────────────────
   STRESS INDICATOR - Ampel-System
   ───────────────────────────────────────────────────────────────────────────── */

.stress-indicator {
  @apply w-full;
}

.stress-indicator-sm { @apply text-sm; }
.stress-indicator-md { @apply text-base; }
.stress-indicator-lg { @apply text-lg; }

.stress-indicator-header {
  @apply flex justify-between items-center mb-2;
}

.stress-indicator-label {
  @apply text-gray-600 dark:text-gray-400 text-sm font-medium;
}

.stress-indicator-status {
  @apply font-bold text-sm uppercase tracking-wide;
}

.stress-indicator-bar-container {
  @apply relative h-3 bg-gray-200 dark:bg-dark-elevated rounded-full overflow-hidden;
}

.stress-indicator-bar {
  @apply h-full rounded-full transition-all duration-300;
}

.stress-indicator-markers {
  @apply absolute inset-0 pointer-events-none;
}

.stress-indicator-markers .marker {
  @apply absolute top-0 bottom-0 w-0.5 bg-white/30;
}

.stress-indicator-slider {
  @apply w-full mt-2 cursor-pointer;
}

.stress-indicator-value {
  @apply text-center font-mono font-bold text-2xl mt-2;
}

.stress-indicator-zones {
  @apply flex justify-between text-xs text-gray-400 mt-1;
}

.stress-indicator-zones .zone {
  @apply flex-1 text-center;
}

.zone-green { @apply text-green-500; }
.zone-yellow { @apply text-yellow-500; }
.zone-orange { @apply text-orange-500; }
.zone-red { @apply text-red-500; }

/* Stress Badges */
.stress-badge {
  @apply inline-block px-2 py-0.5 rounded text-xs font-semibold uppercase;
}

.stress-badge-green {
  @apply bg-green-100 text-green-700 border border-green-300;
  @apply dark:bg-green-900/30 dark:text-green-400 dark:border-green-700;
}

.stress-badge-yellow {
  @apply bg-yellow-100 text-yellow-700 border border-yellow-300;
  @apply dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-700;
}

.stress-badge-orange {
  @apply bg-orange-100 text-orange-700 border border-orange-300;
  @apply dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-700;
}

.stress-badge-red {
  @apply bg-red-100 text-red-700 border border-red-300;
  @apply dark:bg-red-900/30 dark:text-red-400 dark:border-red-700;
}

/* ─────────────────────────────────────────────────────────────────────────────
   CLYDE MESSAGE BUBBLE
   ───────────────────────────────────────────────────────────────────────────── */

.clyde-bubble {
  @apply relative bg-calm-50 dark:bg-dark-elevated rounded-xl p-4 mb-4;
  @apply border-l-4 border-calm-500;
}

.clyde-bubble::before {
  content: 'C';
  @apply absolute -left-3 -top-2 w-6 h-6 rounded-md flex items-center justify-center;
  @apply text-xs font-bold text-white;
  background: linear-gradient(135deg, #667eea, #7c3aed);
}

.clyde-bubble-text {
  @apply text-gray-700 dark:text-gray-300 italic;
}

.clyde-bubble-action {
  @apply mt-3 flex gap-2;
}
